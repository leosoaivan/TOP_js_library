document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("#add-book-form");let t=document.querySelectorAll(".modal");let o={onCloseEnd:function(){e.reset()}};M.Modal.init(t[0],o)});function Book(e,t,o,n){this.title=e;this.author=t;this.pages=o;this.read=n;this.toggleRead=function(){this.read=!this.read}}let myLibrary=[];let book1=new Book("The Fellowship of the Ring","J. R. R. Tolkien","479",true);let book2=new Book("The Two Towers","J. R. R. Tolkien","415",true);let book3=new Book("The Return of the King","J. R. R. Tolkien","347",true);let book4=new Book("The Silmarillion","J. R. R. Tolkien","365",false);const tableBooks=document.getElementById("table-books");myLibrary.push(book1,book2,book3,book4);renderLibrary();function renderLibrary(){tableBooks.innerHTML="";for(let e=0;e<myLibrary.length;e++){let t=tableBooks.insertRow(-1);t.setAttribute("data-book-index",e);fillRow(e,t)}}function fillRow(e,t){let o=myLibrary[e];for(let n in o){if(o.hasOwnProperty(n)&&n=="read"){let r=t.insertCell(-1);r.classList.add("read-column");insertIcon(e,r,o[n])}else if(o.hasOwnProperty(n)&&typeof o[n]!="function"){t.insertCell(-1).innerText=o[n]}else{insertIcon(e,t.insertCell(-1),"delete")}}}function insertIcon(e,t,o){let n=o.toString();let r=createIcon(e,n);t.appendChild(r);defineIconAction(r,n)}function createIcon(e,t){let o=document.createElement("a");o.setAttribute("data-book-index-delete",e);o.classList.add("material-icons");defineIconType(o,t);return o}function defineIconType(e,t){switch(t){case"delete":e.classList.add("delete");e.innerHTML=t;break;case"true":e.classList.add("check");e.innerHTML="check";break;case"false":e.classList.add("clear");e.innerHTML="clear";break}}function defineIconAction(e,t){e.addEventListener("click",function(){switch(t){case"delete":deleteBook(e);break;case"true":toggleRead(e);break;case"false":toggleRead(e);break}})}function toggleRead(e){let t=e.parentElement.parentElement;let o=t.dataset.bookIndex;let n=myLibrary[o];t.innerHTML="";n.toggleRead();fillRow(o,t)}function deleteBook(e){let t=e.parentElement.parentElement;let o=t.parentElement;if(confirm("Are you sure you want to delete this book?")){o.removeChild(t)}}let cancelBookButton=document.querySelector("#add-book-form__cancel");cancelBookButton.onclick=function(){resetForm()};function resetForm(){addBookForm=document.getElementById("add-book-form").reset()}let createBookButton=document.querySelector("#add-book-form__submit");createBookButton.onclick=function(){let e=this.form[0].value;if(!e||e.trim().length===0){alert("You must enter a Title")}else{addBookToLibrary();hideAddBookSection();resetForm();render()}};function addBookToLibrary(){let e=this.form[0].value;let t=this.form[1].value;let o=this.form[2].value;let n=this.form[3].checked;let r=new Book(e,t,o,n);myLibrary.push(r)}