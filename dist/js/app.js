let myLibrary=[];let allButtons=[];let book1=new Book("The Fellowship of the Ring","J. R. R. Tolkien","479",true);let book2=new Book("The Two Towers","J. R. R. Tolkien","415",true);let book3=new Book("The Return of the King","J. R. R. Tolkien","347",true);let book4=new Book("The Silmarillion","J. R. R. Tolkien","365",false);let toggleButton=new Button("toggle","Already read it?","toggle-button");let deleteButton=new Button("delete","Delete this book","delete-button");const tableBooks=document.getElementById("table-books");const addBookSection=document.getElementById("add-book");myLibrary.push(book1,book2,book3,book4);allButtons.push(toggleButton,deleteButton);render();function Book(e,t,o,n){this.title=e;this.author=t;this.pages=o;this.read=n;this.toggleRead=function(){return this.read=!this.read}}function Button(e,t,o){this.type=e;this.btnText=t;this.btnClass=o}function render(){tableBooks.innerHTML="";for(let e=0;e<myLibrary.length;e++){let t=tableBooks.insertRow(0);t.setAttribute("data-book-index",e);createCells(e,t)}}function createCells(e,t){let o=myLibrary[e];for(let e in o){if(o.hasOwnProperty(e)&&typeof o[e]!="function"){t.insertCell(-1).innerText=o[e]}else{addButton(t.insertCell(-1),"toggle");addButton(t.insertCell(-1),"delete")}}}function addButton(e,t){buttonTemplate=allButtons.find(e=>e.type===t);newButton=buildButton(buttonTemplate);e.appendChild(newButton)}function buildButton(e){let t=document.createElement("button");t.innerHTML=e.btnText;t.classList.add(e.btnClass);t.addEventListener("click",function(){switch(e.type){case"toggle":toggleRead(t);break;case"delete":deleteBook(t);break}});return t}function toggleRead(e){let t=e.parentElement.parentElement;let o=t.dataset.bookIndex;let n=myLibrary[o];t.innerHTML="";n.read=!n.read;createCells(o,t)}function deleteBook(e){let t=e.parentElement.parentElement;let o=t.parentElement;o.removeChild(t)}let showFormButton=document.getElementById("show-book__button");showFormButton.onclick=function(){showAddBookSection()};function showAddBookSection(){addBookSection.style.display="block"}function hideAddBookSection(){addBookSection.style.display="none"}let createBookButton=document.getElementById("add-book-form__submit");createBookButton.onclick=function(){let e=this.form[0].value;if(!e||e.trim().length===0){alert("You must enter a Title")}else{addBookToLibrary();hideAddBookSection();resetForm();render()}};function addBookToLibrary(){let e=this.form[0].value;let t=this.form[1].value;let o=this.form[2].value;let n=this.form[3].checked;let l=new Book(e,t,o,n);myLibrary.push(l)}function resetForm(){addBookForm=document.getElementById("add-book-form").reset()}