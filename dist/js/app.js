function Book(e,o,t,n){this.title=e;this.author=o;this.pages=t;this.read=n;this.toggleRead=function(){this.read=!this.read}}let myLibrary=[];let book1=new Book("The Fellowship of the Ring","J. R. R. Tolkien","479",true);let book2=new Book("The Two Towers","J. R. R. Tolkien","415",true);let book3=new Book("The Return of the King","J. R. R. Tolkien","347",true);let book4=new Book("The Silmarillion","J. R. R. Tolkien","365",false);const tableBooks=document.getElementById("table-books");const addBookSection=document.getElementById("add-book");myLibrary.push(book1,book2,book3,book4);renderLibrary();function renderLibrary(){tableBooks.innerHTML="";for(let e=0;e<myLibrary.length;e++){let o=tableBooks.insertRow(-1);o.setAttribute("data-book-index",e);fillRow(e,o)}}function fillRow(e,o){let t=myLibrary[e];for(let n in t){if(t.hasOwnProperty(n)&&n=="read"){let i=o.insertCell(-1);i.classList.add("read-column");insertIcon(e,i,t[n])}else if(t.hasOwnProperty(n)&&typeof t[n]!="function"){o.insertCell(-1).innerText=t[n]}else{insertIcon(e,o.insertCell(-1),"delete")}}}function insertIcon(e,o,t){let n=t.toString();let i=createIcon(e,n);o.appendChild(i);defineIconAction(i,n)}function createIcon(e,o){let t=document.createElement("a");t.setAttribute("data-book-index-delete",e);t.classList.add("material-icons");defineIconType(t,o);return t}function defineIconType(e,o){switch(o){case"delete":e.classList.add("delete");e.innerHTML=o;break;case"true":e.classList.add("check");e.innerHTML="check";break;case"false":e.classList.add("clear");e.innerHTML="clear";break}}function defineIconAction(e,o){e.addEventListener("click",function(){switch(o){case"delete":deleteBook(e);break;case"true":toggleRead(e);break;case"false":toggleRead(e);break}})}function toggleRead(e){let o=e.parentElement.parentElement;let t=o.dataset.bookIndex;let n=myLibrary[t];o.innerHTML="";n.toggleRead();fillRow(t,o)}function deleteBook(e){let o=e.parentElement.parentElement;let t=o.parentElement;if(confirm("Are you sure you want to delete this book?")){t.removeChild(o)}}let showFormButton=document.getElementById("show-book__button");let cancelBookButton=document.querySelector("#add-book-form__cancel");showFormButton.onclick=function(){showAddBookSection()};cancelBookButton.onclick=function(){resetForm();hideAddBookSection()};function showAddBookSection(){addBookSection.style.display="block"}function hideAddBookSection(){addBookSection.style.display="none"}let createBookButton=document.querySelector("#add-book-form__submit");createBookButton.onclick=function(){let e=this.form[0].value;if(!e||e.trim().length===0){alert("You must enter a Title")}else{addBookToLibrary();hideAddBookSection();resetForm();render()}};function addBookToLibrary(){let e=this.form[0].value;let o=this.form[1].value;let t=this.form[2].value;let n=this.form[3].checked;let i=new Book(e,o,t,n);myLibrary.push(i)}function resetForm(){addBookForm=document.getElementById("add-book-form").reset()}