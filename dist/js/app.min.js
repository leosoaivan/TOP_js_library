function Book(e,t,o,n){this.title=e,this.author=t,this.pages=o,this.read=n,this.toggleRead=function(){this.read=!this.read}}function Button(e,t,o){this.type=e,this.btnText=t,this.btnClass=o}let myLibrary=[],allButtons=[],book1=new Book("The Fellowship of the Ring","J. R. R. Tolkien","479",!0),book2=new Book("The Two Towers","J. R. R. Tolkien","415",!0),book3=new Book("The Return of the King","J. R. R. Tolkien","347",!0),book4=new Book("The Silmarillion","J. R. R. Tolkien","365",!1),toggleButton=new Button("toggle","Already read it?","toggle-button"),deleteButton=new Button("delete","Delete this book","delete-button");const tableBooks=document.getElementById("table-books"),addBookSection=document.getElementById("add-book");function renderLibrary(){tableBooks.innerHTML="";for(let e=0;e<myLibrary.length;e++){let t=tableBooks.insertRow(0);t.setAttribute("data-book-index",e),fillRow(e,t)}}function fillRow(e,t){let o=myLibrary[e];for(let e in o)o.hasOwnProperty(e)&&"function"!=typeof o[e]?t.insertCell(-1).innerText=o[e]:(addButton(t.insertCell(-1),"toggle"),addIcon(t.insertCell(-1),"delete"))}function addIcon(e,t){newIcon=document.createElement("a"),newIcon.setAttribute("class","material-icons"),newIcon.innerHTML=t,e.appendChild(newIcon),newIcon.addEventListener("click",function(){switch(t){case"delete":deleteBook(newIcon)}})}function addButton(e,t){buttonTemplate=allButtons.find(e=>e.type===t),newButton=buildButton(buttonTemplate),e.appendChild(newButton)}function buildButton(e){let t=document.createElement("button");return t.innerHTML=e.btnText,t.classList.add(e.btnClass),t.addEventListener("click",function(){switch(e.type){case"toggle":toggleRead(t);break;case"delete":deleteBook(t)}}),t}function toggleRead(e){let t=e.parentElement.parentElement,o=t.dataset.bookIndex,n=myLibrary[o];t.innerHTML="",n.toggleRead(),fillRow(o,t)}function deleteBook(e){let t=e.parentElement.parentElement,o=t.parentElement;confirm("Are you sure you want to delete this book?")&&o.removeChild(t)}myLibrary.push(book1,book2,book3,book4),allButtons.push(toggleButton,deleteButton),renderLibrary();let showFormButton=document.getElementById("show-book__button"),cancelBookButton=document.querySelector("#add-book-form__cancel");function showAddBookSection(){addBookSection.style.display="block"}function hideAddBookSection(){addBookSection.style.display="none"}showFormButton.onclick=function(){showAddBookSection()},cancelBookButton.onclick=function(){resetForm(),hideAddBookSection()};let createBookButton=document.querySelector("#add-book-form__submit");function addBookToLibrary(){let e=new Book(this.form[0].value,this.form[1].value,this.form[2].value,this.form[3].checked);myLibrary.push(e)}function resetForm(){addBookForm=document.getElementById("add-book-form").reset()}createBookButton.onclick=function(){let e=this.form[0].value;e&&0!==e.trim().length?(addBookToLibrary(),hideAddBookSection(),resetForm(),render()):alert("You must enter a Title")};